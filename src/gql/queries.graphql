query getAllNuggs(
    $first: Int
    $skip: Int
    $orderDirection: OrderDirection
    $orderBy: Nugg_orderBy
    $where: Nugg_filter
) {
    nuggs(
        where: $where
        orderBy: $orderBy
        orderDirection: $orderDirection
        first: $first
        skip: $skip
    ) {
        id
        # dotnuggRawCache
        idnum
    }
}
# query getNuggItemSince($nuggItemId: ID! ) {
#     nuggItem({

#     }
# }
query getNuggSnapshots($tokenId: ID!) {
    nugg(id: $tokenId) {
        id
        snapshots {
            id
            snapshotNum
            block
            user {
                id
            }
            chunk
            chunkError
            proof
        }
    }
}

query getAllNuggsSearch(
    $first: Int
    $skip: Int
    $orderDirection: OrderDirection
    $orderBy: Nugg_orderBy
    $where: Nugg_filter
) {
    nuggs(
        where: $where
        orderBy: $orderBy
        orderDirection: $orderDirection
        first: $first
        skip: $skip
    ) {
        id
        user {
            id
        }
        dotnuggRawCache
        items {
            id
        }
        activeLoan {
            id
        }
        activeSwap {
            id
        }
    }
}

query getDotnuggNugg($tokenId: ID!) {
    nugg(id: $tokenId) {
        id
        dotnuggRawCache
    }
}

query getDotnuggItem($tokenId: ID!) {
    item(id: $tokenId) {
        id
        dotnuggRawCache
    }
}

query getAllItems(
    $first: Int
    $skip: Int
    $orderDirection: OrderDirection
    $orderBy: Item_orderBy
    $where: Item_filter
) {
    items(
        where: $where
        orderBy: $orderBy
        orderDirection: $orderDirection
        first: $first
        skip: $skip
    ) {
        id
        # dotnuggRawCache
        idnum
    }
}

query getAllItemsSearch(
    $first: Int
    $skip: Int
    $orderDirection: OrderDirection
    $orderBy: Item_orderBy
    $where: Item_filter
) {
    items(
        where: $where
        orderBy: $orderBy
        orderDirection: $orderDirection
        first: $first
        skip: $skip
    ) {
        ...liveItem
    }
}

query getLiveNugg($tokenId: ID!) {
    nugg(id: $tokenId) {
        ...liveNugg
    }
}

query getLiveItem($tokenId: ID!) {
    item(id: $tokenId) {
        ...liveItem
    }
}

query health {
    _meta {
        block {
            number
        }
    }
}

query getNuggsThatHold($first: Int, $skip: Int, $orderDirection: OrderDirection, $itemId: String!) {
    nuggItems(
        orderBy: displayedSinceUnix
        orderDirection: $orderDirection
        first: $first
        skip: $skip
        where: { item: $itemId, displayed: true }
    ) {
        id
        nugg {
            id
        }
        displayedSinceUnix
        displayedSinceBlock
    }
}

query getSwapData($tokenId: ID!) {
    nugg(id: $tokenId) {
        id
        activeSwap {
            ...swapdata
        }
    }
}
query getItemSwapData($tokenId: ID!) {
    item(id: $tokenId) {
        id
        activeSwap {
            ...itemswapdata
        }
    }
}

query getLiveProtocol {
    protocol(id: "0x42069") {
        ...liveProtocol
    }
}
fragment liveProtocolBase on Protocol {
    id
    totalNuggs
    lastEpoch {
        ...epochswapdata
    }
    nextEpoch {
        _upcomingActiveItemSwaps
        ...epochswapdata
    }
    featureTotals
    nuggftStakedEth
    nuggftStakedShares

    featureTotals
}
fragment liveProtocol on Protocol {
    ...liveProtocolBase
    activeNuggs(orderBy: idnum) {
        id
        idnum
        activeSwap {
            ...swapdata
            # id
            # eth
            # endingEpoch
        }
    }
    activeNuggItems {
        id
        activeSwap {
            ...itemswapdata

            # id
            # sellingNuggItem {
            #     id
            #     item {
            #         id
            #     }
            # }
            # eth
            # endingEpoch
        }
    }
    activeItems {
        id
        activeSwap {
            ...itemswapdata
            # id
            # sellingItem {
            #     id
            # }
            # eth
            # endingEpoch
        }
        upcomingActiveSwap {
            ...itemswapdata

            # id
            # sellingItem {
            #     id
            # }
            # eth
            # endingEpoch
        }
    }
}

query getMassiveLiveProtocol {
    protocol(id: "0x42069") {
        ...liveProtocolBase
        activeNuggs(orderBy: idnum, first: 1000) {
            id
            idnum
            activeSwap {
                ...swapdata
                # id
                # eth
                # endingEpoch
            }
        }
        activeNuggItems(first: 1000) {
            id
            activeSwap {
                ...itemswapdata

                # id
                # sellingNuggItem {
                #     id
                #     item {
                #         id
                #     }
                # }
                # eth
                # endingEpoch
            }
        }
        activeItems(first: 1000) {
            id
            activeSwap {
                ...itemswapdata
                # id
                # sellingItem {
                #     id
                # }
                # eth
                # endingEpoch
            }
            upcomingActiveSwap {
                ...itemswapdata

                # id
                # sellingItem {
                #     id
                # }
                # eth
                # endingEpoch
            }
        }
    }
}
